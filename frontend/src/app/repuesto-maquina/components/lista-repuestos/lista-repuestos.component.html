<div class="form-container">

  <div class="card">

    <h2 class="card-header">
      {{section}}
    </h2>

    <div class="card-body">

      <form [formGroup]="form" (ngSubmit)="asociar()">

        <div class="form-row">
    
            <div class="col">
            <label for="repuesto_id">Repuesto</label>
            <app-input [type]="'select-pair'"
                       [parentForm]="form" 
                       [control]="form.controls.repuesto_id" 
                       [options]="dataSourceRepuestos"
                       (change)="getRepuestId($event.target.value)">
            </app-input>
            </div>
     
            <div class="col">
            <label for="cantidad_instalada">Cantidad a asociar</label>
            <app-input [type]="'onlyNumber'"
                       [parentForm]="form" 
                       [control]="form.controls.cantidad_instalada">
            </app-input>
            </div>

        </div>

        <div class="form-row">
          <div class="col">
          <label for="maquina_id">Maquina</label>
          <app-input [type]="'select-pair'"
                     [parentForm]="form" 
                     [control]="form.controls.maquina_id" 
                     [options]="dataSourceMaquinas"
                     (change)="getMachineId($event.target.value)">
          </app-input>
          </div>
      
          <div class="col">
          <label for="cantidad_instalada">Parte de maquina</label>
          <app-input [type]="'select-pair'"
                     [parentForm]="form" 
                     [control]="form.controls.cantidad_instalada"
                     [options]="dataSourcePartes"
                     (change)="getPartId($event.target.value)">
          </app-input>
          </div>

        </div>

        <div class="form-row">

          <div class="col">
          <label for="observaciones">Observaciones</label>
          <app-input [type]="'textarea'" 
               [parentForm]="form"  
               [control]="form.controls.observaciones">
          </app-input>
          </div>

        </div>

        <div style="margin-top: 3%" class="btn-group btn-group-toggle" data-toggle="buttons">
          <app-button [name]="buttonName" type="submit" [type]="'success'"></app-button>
          <app-button [name]="'Cancelar'" [type]="'cancel'" [routeForButton]="routeButton"></app-button>
        </div>

      </form>

    </div>

  </div>

</div>




<!-- <div class="form-container">

  <div class="card">

    <h2 class="card-header">
      Asociar repuestos
    </h2>

    <div class="card-body">

      <div class="form-row">

        <div class="col">
        <label for="repuesto_id">Repuesto</label>
        <app-input [type]="'select-pair'"
                   [parentForm]="form" 
                   [control]="form.controls.repuesto_id" 
                   [options]="dataSourceRepuestos">
        </app-input>
        </div>
 
        <div class="col">
        <label for="cantidad_instalada">Cantidad a asociar</label>
        <app-input [type]="'onlyNumber'"
                   [parentForm]="form" 
                   [control]="form.controls.cantidad_instalada">
        </app-input>
        </div>


      </div>

      <app-button style="margin: 5%;" [name]="['Agregar']" [type]="'success'" (click)="agruopData()"></app-button>
      
    </div>

    <div class="form-row" >

      <div class="col">
        
        <div class="card" style="margin: 5%;">
          <div class="card-header">
            Seleccion actual
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item" *ngFor="let r of seleccion">

  
              Codigo de repuesto: <b>{{r.repuesto_id}}</b> / Cantidad a instalar: <b>{{r.cantidad_instalada}}</b> -  <button class="btn btn-danger btn-sm" (click)="deleteSelection()">Eliminar</button>
            </li>
          </ul>
        </div>
    
      </div>
    
    </div>

    <div class="form-row" style="margin: 5%;"> 

      <div class="col">
        <label for="maquina_id">Maquina</label>
        <app-input [type]="'select-pair'"
                   [parentForm]="maquina" 
                   [control]="maquina.controls.maquina_id" 
                   [options]="dataSourceMaquinas"
                   (change)="getMachineId($event.target.value)">
        </app-input>
        </div>
    
        <div class="col">
        <label for="cantidad_instalada">Parte de maquina</label>
        <app-input [type]="'select-pair'"
                   [parentForm]="maquina" 
                   [control]="form.controls.cantidad_instalada"
                   [options]="dataSourcePartes"
                   (change)="getPartId($event.target.value)">
        </app-input>
        </div>

        
      </div>

      <div style="margin: 5%;">
        <label for="cantidad_instalada">Observaciones</label>
        <app-input [type]="'textarea'"
        [parentForm]="maquina" 
        [control]="form.controls.observaciones"
        (change)="getObservaciones($event.target.value)">
      </app-input>
      </div>


      
      
  </div>

              
  <div style="margin-top: 3%" class="btn-group btn-group-toggle" data-toggle="buttons">
    <app-button [name]="['Asociar repuestos']" [type]="'success'" (click)="asociar()"></app-button>
    <app-button [name]="'Cancelar'" [type]="'cancel'"></app-button>
  </div>



</div>











 -->





<!-- <div class="container-fluid">

  <mat-card>

    <form [formGroup]="form">

      <br>
      <mat-label>Filtrar por modelo</mat-label>
      <br>

      <mat-form-field appearance="fill">
        <mat-select [(value)]="modeloValue" (selectionChange)="filtrarPorModelo(modeloValue)">
          <mat-option value="all">Todos</mat-option>
          <mat-option *ngFor="let m of modelos" [value]="m">
            {{m}}
          </mat-option>
        </mat-select>
      </mat-form-field>
          
      <br>
      <mat-label>Selecciona un repuesto</mat-label>
      <br>

      <mat-form-field appearance="fill">
        
        <mat-select formControlName="repuesto" (selectionChange)="seleccionRepuesto">
          
          <mat-option *ngFor="let repuesto of changeDataSource()" [value]="repuesto">
            {{repuesto.nombre}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      
      
      <br>
      Cantidad:
      <br>
      <input type="number" (ngValue)='cntInstalada' formControlName="cantidad_instalada">


      <app-button [name]="['Agregar']" [type]="'primary'" (click)="agruopData()"></app-button>

      <hr class="my-7">
      <div>
        <p>Seleccion:</p>

        <ul class="list-group list-group-flush">
          <li class="list-group-item" *ngFor="let r of seleccion">
            Nombre de repuesto:
            <b>{{ r.nombre }}</b>
            <br>
            Cantidad a instalar elegida:
            <b>
              {{r.cantidad_instalada}}
            </b>
            <br>
          </li>

        </ul>
        <button (click)="deleteSelection()" class="btn btn-secondary btn-sm">Eliminar ultima seleccion</button>
      </div>


      <hr class="my-7">


      <mat-form-field appearance="fill">
        <mat-label>Selecciona una maquina</mat-label>
        <mat-select #maquina (selectionChange)="getMaquinaForSelect($event.value)">
          <mat-option *ngFor="let maquina of dataSourceMaquinas" [value]="maquina">
            {{maquina.maquina_cod}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <button style="margin: 1%;" type="button" class="btn btn-primary btn-sm" (click)="asociar()">
        Confirmar
      </button>






    </form>

  </mat-card>

</div> -->